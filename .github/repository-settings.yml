# Repository settings to enforce across repos
# This is a lightweight declarative shape used by the enforcement workflow.
# Edit settings as needed; the workflow will apply these to the current repo.

default_branch: main
allow_merge_commit: false
allow_rebase_merge: false
allow_squash_merge: true
has_wiki: false
has_projects: false
allow_forking: false
archived: false

# Require status checks (contexts must match CI workflow names)
required_status_checks:
  strict: true
  contexts:
    - CI
    - secret_scan

# Required pull request reviews
required_pull_request_reviews:
  dismiss_stale_reviews: true
  require_code_owner_reviews: false
  required_approving_review_count: 1

# Branch protection targets
branch_protection:
  - branch: main
    required_status_checks:
      strict: true
      contexts: [CI, secret_scan]
    enforce_admins: true
    required_pull_request_reviews:
      dismiss_stale_reviews: true
      required_approving_review_count: 1
    required_linear_history: true
    allow_force_pushes: false
    allow_deletions: false
